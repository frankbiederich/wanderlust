<meta name="viewport" content="width=device-width, initial-scale=1"/>
<script src="/scripts/lib-franklin.js" type="module"></script>
<script src="/scripts/scripts.js" type="module"></script>

<link rel="stylesheet" href="/styles/styles.css"/>
<link rel="icon" href="data:,">

<!--

Gallery initialization

-->

<link type="text/css" rel="stylesheet" href="/styles/lightgallery.min.css"/>
<link type="text/css" rel="stylesheet" href="/blocks/gallery/gallery.css"/>

<script src="/blocks/gallery/lightgallery.min.js" defer></script>
<script src="/blocks/gallery/gallery.js" defer></script>

<script>
  window.gallery = {};
  window.gallery.observer = new MutationObserver(mutations => {
  mutations.forEach(mutation => {
    mutation.addedNodes.forEach(node => {
      if (node.tagName === 'DIV' && node.classname === "gallery") {
        node.querySelectorAll('img').forEach(($img) => {
          if (!$img.src) return;
          $img.setAttribute('src', `${$img.getAttribute('src').split('?')[0]}?width=264&crop=3:2&format=webply&optimize=medium`);
        });
      }
    });
  });
});

window.gallery.observer.observe(document, {
  childList: true,
  subtree: true,
});
</script>

<!-- Test>